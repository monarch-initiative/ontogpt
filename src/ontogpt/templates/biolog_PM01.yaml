id: https://example.org/PaperExtractionSchema
name: PaperExtractionSchema
title: Paper Extraction Schema
description: "Schema for extracting structured data from papers, including Biolog Phenotype MicroArray experiments. Extended to capture PM01 well-level results."
license: https://creativecommons.org/publicdomain/zero/1.0/
version: 0.2.0

prefixes:
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  linkml: "https://w3id.org/linkml/"
  paperex: "https://example.org/PaperExtractionSchema/"

default_prefix: paperex
default_range: string

imports:
  - linkml:types
  - core  # Adjust or remove if your environment does not have a 'core' schema.

########################
# ENUMS
########################

enums:
  FlexibleBooleanEnum:
    description: >
      A minimal enumeration for capturing yes/no/true/false in lowercase,
      plus 'not provided' if data are missing or ambiguous.
    permissible_values:
      'yes': {}
      'no': {}
      'true': {}
      'false': {}
      'not provided': {}

  PM01ResultEnum:
    description: >
      Captures whether the PM01 assay result was positive, negative, or not provided.
    permissible_values:
      positive: {}
      negative: {}
      not provided: {}

  PM01ChemicalEnum:
    description: >
      Enumeration of all 96 wells/chemicals in Biolog PM01.
    permissible_values:
      L-Arabinose: {}
      N-Acetyl-D-Glucosamine: {}
      D-Saccharic\ acid: {}
      Succinic\ acid: {}
      D-Galactose: {}
      L-Aspartic\ acid: {}
      L-Proline: {}
      D-Alanine: {}
      D-Trehalose: {}
      D-Mannose: {}
      Dulcitol: {}
      D-Serine: {}
      D-Sorbitol: {}
      Glycerol: {}
      L-Fucose: {}
      D-Glucuronic\ acid: {}
      D-Gluconic\ acid: {}
      DL-a-Glycerol\ Phosphate: {}
      D-Xylose: {}
      L-Lactic\ acid: {}
      Formic\ acid: {}
      D-Mannitol: {}
      L-Glutamic\ acid: {}
      D-Glucose-6-Phosphate: {}
      D-Galactonic\ acid-g-Lactone: {}
      DL-Malic\ acid: {}
      D-Ribose: {}
      Tween\ 20: {}
      L-Rhamnose: {}
      D-Fructose: {}
      Acetic\ acid: {}
      a-D-Glucose: {}
      Maltose: {}
      D-Melibiose: {}
      Thymidine: {}
      L-Asparagine: {}
      D-Aspartic\ acid: {}
      D-Glucosaminic\ acid: {}
      1,2-Propanediol: {}
      Tween\ 40: {}
      a-Ketoglutaric\ acid: {}
      a-Ketobutyric\ acid: {}
      a-Methyl-D-Galactoside: {}
      a-D-Lactose: {}
      Lactulose: {}
      Sucrose: {}
      Uridine: {}
      L-Glutamine: {}
      m-Tartaric\ acid: {}
      D-Glucose-1-Phosphate: {}
      D-Fructose-6-Phosphate: {}
      Tween\ 80: {}
      a-Hydroxyglutaric\ acid-g-Lactone: {}
      a-Hydroxybutyric\ acid: {}
      b-Methyl-D-Glucoside: {}
      Adonitol: {}
      Maltotriose: {}
      "2`-Deoxyadenosine": {}
      Adenosine: {}
      Gly-Asp: {}
      Citric\ acid: {}
      m-Inositol: {}
      D-Threonine: {}
      Fumaric\ acid: {}
      Bromosuccinic\ acid: {}
      Propionic\ acid: {}
      Mucic\ acid: {}
      Glycolic\ acid: {}
      Glyoxylic\ acid: {}
      D-Cellobiose: {}
      Inosine: {}
      Gly-Glu: {}
      Tricarballylic\ acid: {}
      L-Serine: {}
      L-Threonine: {}
      L-Alanine: {}
      Ala-Gly: {}
      Acetoacetic\ acid: {}
      N-Acetyl-D-Mannosamine: {}
      Mono-Methylsuccinate: {}
      Methylpyruvate: {}
      D-Malic\ acid: {}
      L-Malic\ acid: {}
      Gly-Pro: {}
      p-Hydroxyphenyl\ Acetic\ acid: {}
      m-Hydroxyphenyl\ Acetic\ acid: {}
      Tyramine: {}
      D-Psicose: {}
      L-Lyxose: {}
      Glucuronamide: {}
      Pyruvic\ acid: {}
      L-Galactonic\ acid-g-Lactone: {}
      D-Galacturonic\ acid: {}
      Phenylethylamine: {}
      2-Aminoethanol: {}

########################
# CLASSES
########################

classes:

  Paper:
    tree_root: true
    description: "A single paper or study."
    attributes:
      study_title:
        description: "The paper's title."
        annotations:
          prompt: >-
            Extract the paper's title. If not found, return only 'Not provided'.
          prompt.examples:
            Root Exudates Alter the Expression of Diverse Metabolic, Transport, Regulatory, and Stress Response Genes in Rhizosphere Pseudomonas.
        required: true

      authors:
        description: "Authors of the paper."
        annotations:
          prompt: |
            Extract a list of authors, semicolon delimited.
            If multiple authors appear in one string, please split them carefully.
            If not found, use 'Not provided'.
        range: string
        multivalued: true
        required: true

      doi:
        description: "DOI of the publication."
        annotations:
          prompt: "Extract the DOI. If not found, use 'Not provided'."
        range: string
        required: false

      date:
        description: "Publication date."
        annotations:
          prompt: "Extract the publication date. If not found, use 'Not provided'."
        range: string
        required: false

      traits:
        description: "Organismal traits measured or observed."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of traits
            focused on in the study.
          prompt.examples:
            Growth rate; Lactose production; motility
        multivalued: true
        range: Trait
        required: false

      experiments:
        description: "Experiments (e.g., Biolog) included in the paper."
        annotations:
          prompt: |
            Extract a list of brief descriptions of experiments
            described in the paper. This list must be semicolon-delimited.
            For each description, include all of the following details if
            provided: experiment motivation (why it was performed),
            experiment design (how it was performed, including methods,
            tools, organisms, and chemicals used), environment (the location
            and conditions in which the experiment occurred, including
            metrics like temperature), all organisms used and their
            high-level type (e.g., plant, animal), the biological system
            under study (e.g., rhizosphere), experimental conditions
            (temperature, pH, etc.), and experimental factors tested or measured.
            Also note whether the experiment is a Biolog experiment and if so,
            the type or subtype of experiment (e.g., Phenotype MicroArray),
            the Biolog plates used (e.g., PM01), the number of replicates, all
            key steps in the experimental protocol, the types of data collected
            by the plate reader (e.g., OD, respiration), the protocol for
            measuring optical density (e.g., OD600 measured every 2 hours), 
            the protocol for measuring respiration (e.g., Colorimetric change
            at 590 nm for formazan detection), the instrument or equipment used
            (e.g., OmniLog Phenotype MicroArray System), the software used for
            data analysis (e.g., OmniLog Parametric Analysis software), the
            incubation temperature (e.g., 25°C), the total duration of incubation
            (e.g., 48 h), and any other relevant details.
            If nothing is mentioned regarding experiments, use 'Not provided'.
            Do not provide any details here not related to experiments.
            Do not include newlines.
        range: Experiment
        multivalued: true
        required: true

  Experiment:
    description: "A single experiment from the paper."
    attributes:

      label:
        description: >-
          A single sentence description of this experiment.
        annotations:
          prompt: "A single sentence description of this experiment."

      experiment_motivation:
        description: "Rationale for the experiment."
        annotations:
          prompt: |
            Explain the motivation or purpose of the experiment.
            If missing, use 'Not provided'.
        range: string
        required: false

      experiment_design:
        description: "Summary of how the experiment was designed."
        annotations:
          prompt: "Summarize the overall design. If missing, use 'Not provided'."
        range: string
        required: false

      environment:
        description: "Location or conditions in which the experiment occurred."
        annotations:
          prompt: "Extract the environment or setting."
        range: string
        required: false

      host_organism:
        description: "One or more hosts in the experiment."
        annotations:
          prompt: |
            Identify the host organisms or systems used
            in a semicolon-delimited list.
          prompt.examples:
            Brachypodium distachyon; Arabidopsis thaliana
        range: Host
        multivalued: true
        required: false

      host_type:
        description: "Type of host (e.g., plant, animal)."
        annotations:
          prompt: >-
            Describe the host type if applicable (e.g. 'plant').
        range: string
        required: false

      target_organisms:
        description: "Organisms, including microbes, targeted in the experiment."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of target organisms,
            including microbes, targeted in the study. 
          prompt.examples:
            Pseudomonas fluorescens; Bacillus subtilis; Pseudomonas simiae WCS 417
        range: Microbe
        multivalued: true
        required: false

      target_organism_group:
        description: >-
          A high-level description of organisms, including microbes,
          targeted in the experiment.
        annotations:
          prompt: |
            Extract a semicolon-delimited list of groups of target organisms,
            including microbes, targeted in the study.
          prompt.examples:
            Pseudomonas strains; Pseudomonas group; Roseobacter clade
        range: MicrobeGroup
        multivalued: true
        required: false

      biological_system:
        description: "Biological system under study."
        annotations:
          prompt: >-
            Extract the focal biological system (e.g., rhizosphere).
        range: string
        required: false

      conditions:
        description: "Experimental conditions (temperature, pH, etc.)."
        annotations:
          prompt: |
            Identify relevant experimental conditions in a
            semicolon-delimited list (e.g., 25°C; pH 7).
        multivalued: true
        range: string
        required: false

      traits:
        description: "Organismal traits measured or observed."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of traits
            measured or observed in the experiment.
          prompt.examples:
            Growth rate; Lactose production; motility
        multivalued: true
        range: Trait
        required: false

      experimental_factors:
        description: "Factors tested or measured."
        annotations:
          prompt: |
            List experimental factors or treatments
            in a semicolon-delimited list.
        range: ExperimentalFactor
        multivalued: true
        required: false

      is_biolog_experiment:
        description: "Whether the experiment is a Biolog experiment."
        annotations:
          prompt: |
            Indicate if it's a Biolog experiment ('yes' or 'no').
            If not stated, 'not provided'.
        range: FlexibleBooleanEnum
        required: false

      type_of_biolog_experiment:
        description: "Type or subtype of the Biolog experiment."
        annotations:
          prompt: |
            If it is a Biolog experiment, specify the subtype (e.g., Phenotype MicroArray).
            Otherwise, 'Not provided'.
        range: string
        required: false

      plates:
        description: "Biolog plates used (e.g., EcoPlate, GEN III, PM01, PM02A)."
        annotations:
          prompt: |
            Extract the name(s) of any phenotype microarray plates
            (also known as Biolog plates, 96 well plates, microarrays,
            microarray plates, or microplates) in a semicolon-delimited list.
            Names may be in the format PM01, PM02A, etc.
            If not mentioned, 'Not provided'.
          prompt.examples: PM01; PM02A; EcoPlate; GEN III
        range: string
        multivalued: true
        required: false

      replicates:
        description: "Number of replicates."
        annotations:
          prompt: |
            Extract the number of replicates as a single number.
            If not mentioned, 'Not provided'.
        range: string
        required: false

      protocol_steps:
        description: "Key steps in the experimental protocol."
        annotations:
          prompt: |
            List the full protocol steps or key experimental procedures,
            including inoculation details, incubation times/temperatures,
            data recording intervals, and data analysis steps.
            This should be a semicolon-delimited list.
            Do not include newlines.
          prompt.examples:
            1) Grow cells overnight on LB agar; 2) Harvest and suspend in IF-0
        range: ProtocolStep
        multivalued: true
        required: false

      plate_reader_types_of_data_collected:
        description: "Data types collected (OD, respiration, formazan formation, etc.)."
        annotations:
          prompt: |
            Identify data types measured by the plate reader
            (e.g. formazan, OD) in a semi-colon delimited list.
            If none, 'Not provided'.
        range: string
        multivalued: true
        required: false

      od_protocol:
        description: "Protocol for measuring optical density."
        annotations:
          prompt: |
            Describe OD measurement protocol (if relevant).
            If not described, 'Not provided'.
        range: string
        required: false

      respiration_protocol:
        description: "Protocol for measuring respiration or related metabolic activity."
        annotations:
          prompt: |
            Describe the respiration or metabolic activity measurement protocol (e.g. formazan production).
            If none, 'Not provided'.
        range: string
        required: false

      instrument_used:
        description: "Instruments or equipment used for the experiment."
        annotations:
          prompt: |
            Extract the name(s) of the instrument/equipment used
            (e.g., OmniLog system) in a semicolon-delimited list.
            If none, 'Not provided'.
          prompt.examples: OmniLog Phenotype MicroArray System; OmniLog Turbidimeter
        range: string
        multivalued: true
        required: false

      analysis_software:
        description: "Software used to analyze or interpret data."
        annotations:
          prompt: |
            Extract any software or platforms used for data analysis
            in a semicolon-delimited list.
          prompt.examples: OmniLog Parametric Analysis software v1.20.02
        range: string
        multivalued: true
        required: false

      pm01_results:
        description: >
          If this experiment utilized the PM01 Biolog plate, captures
          each well's result (positive, negative, or not provided).
        annotations:
          prompt: >
            If PM01 results are reported, list them as `<chemical> = <result>`.
            For example, `2-Aminoethanol = positive`.  
            Use `positive`, `negative`, or `not provided` to indicate the result.
            One entry per well. If no PM01 data are mentioned, omit.
        range: BiologPM01WellResult
        multivalued: true
        required: false

  BiologPM01WellResult:
    description: "A single well result from the PM01 Biolog plate."
    attributes:
      chemical:
        description: "The chemical compound tested in the PM01 well."
        range: PM01ChemicalEnum
        required: true
      result:
        description: "Whether the strain/organism grew or reacted positively in this well."
        range: PM01ResultEnum
        required: false

  # Placeholder, to be expanded
  Host:
    is_a: NamedEntity
    description: "Detail of a host organism or system."
    attributes:
      name:
        description: "Name of the host organism or system."
        annotations:
          prompt: "The name of the host organism or system."
        range: string
        required: false

  # Placeholder, to be expanded
  Microbe:
    is_a: NamedEntity
    description: "Information about a microbial species or strain."
    attributes:
      name:
        description: "Name of a microbial taxon."
        annotations:
          prompt: "The name of the microbial species or strain."
        range: string
        required: false

  MicrobeGroup:
    is_a: NamedEntity
    description: "Information about a microbial group or taxon."
    attributes:
      name:
        description: "Name of a microbial group or taxon."
        annotations:
          prompt: "The name of the microbial group."
        range: string
        required: false

  ExperimentalFactor:
    is_a: NamedEntity
    description: "A factor manipulated or measured in an experiment."
    attributes:
      placeholder_attribute:
        description: "Placeholder attribute for ExperimentalFactor."
        annotations:
          prompt: |
            Extract details about this experimental factor (e.g. concentration).
            If absent, 'Not provided'.
        range: string
        required: false

  Trait:
    is_a: NamedEntity
    description: "An organism's physical trait measured or observed in an experiment."
    id_prefixes:
      - https
    annotations:
      prompt: |
        A physical trait of an organism measured or observed in the study.
      annotators: bioportal:metpo

  ProtocolStep:
    description: "A step in an experimental protocol."
    attributes:
      step_description:
        description: "A step in the experimental protocol."
        annotations:
          prompt: "Description of a step in the experimental protocol."
        range: string
        required: false

      culture_media:
        description: "Culture media used in the step."
        annotations:
          prompt: |
            The culture media used in the step,
            if applicable. Do not include a value
            for this field if not relevant.
        range: string
        required: false

      culture_temperature:
        description: "Culture incubation temperature used in the step."
        annotations: 
          prompt: |
            The culture conditions used in the step,
            if applicable, including temperature.
            Do not include a value for this field if
            not relevant.
        range: string
        required: false

      culture_duration:
        description: "Culture incubation duration used in the step."
        annotations: 
          prompt: |
            The culture incubation duration used in the step,
            if applicable, expressed as value and unit.
            Do not include a value for this field if
            not relevant.
        range: string
        required: false
