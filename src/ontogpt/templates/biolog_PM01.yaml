id: https://example.org/PaperExtractionSchema
name: PaperExtractionSchema
title: Paper Extraction Schema
description: "Schema for extracting structured data from papers, including Biolog Phenotype MicroArray experiments. Extended to capture PM01 well-level results."
license: https://creativecommons.org/publicdomain/zero/1.0/
version: 0.2.0

prefixes:
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  linkml: "https://w3id.org/linkml/"
  paperex: "https://example.org/PaperExtractionSchema/"

default_prefix: paperex
default_range: string

imports:
  - linkml:types
  - core  # Adjust or remove if your environment does not have a 'core' schema.

########################
# ENUMS
########################

enums:
  FlexibleBooleanEnum:
    description: >
      A minimal enumeration for capturing yes/no/true/false in lowercase,
      plus 'not provided' if data are missing or ambiguous.
    permissible_values:
      yes: {}
      no: {}
      true: {}
      false: {}
      "not provided": {}

  PlateEnum:
    description: >
      Enumeration of Biolog phenotype microarray plates with canonical names.
    permissible_values:
      PM01: {}
      PM02: {}

  PM01ResultEnum:
    description: >
      Captures whether the PM01 assay result was positive, negative, or not provided.
    permissible_values:
      positive: {}
      negative: {}
      "not provided": {}

  PM01ChemicalEnum:
    description: >
      Enumeration of all known 96 wells/chemicals in Biolog PM01.
      NOTE: if a chemical is not in this list,
      still record it in pm01_well_results.chemical_name as free text.
    permissible_values:
      "L-Arabinose": {}
      "N-Acetyl-D-Glucosamine": {}
      "D-Saccharic acid": {}
      "Succinic acid": {}
      "D-Galactose": {}
      "L-Aspartic acid": {}
      "L-Proline": {}
      "D-Alanine": {}
      "D-Trehalose": {}
      "D-Mannose": {}
      Dulcitol: {}
      "D-Serine": {}
      "D-Sorbitol": {}
      Glycerol: {}
      "L-Fucose": {}
      "D-Glucuronic acid": {}
      "D-Gluconic acid": {}
      "DL-a-Glycerol Phosphate": {}
      "D-Xylose": {}
      "L-Lactic acid": {}
      "Formic acid": {}
      "D-Mannitol": {}
      "L-Glutamic acid": {}
      "D-Glucose-6-Phosphate": {}
      "D-Galactonic acid-g-Lactone": {}
      "DL-Malic acid": {}
      "D-Ribose": {}
      "Tween 20": {}
      "L-Rhamnose": {}
      "D-Fructose": {}
      "Acetic acid": {}
      "a-D-Glucose": {}
      Maltose: {}
      "D-Melibiose": {}
      Thymidine: {}
      "L-Asparagine": {}
      "D-Aspartic acid": {}
      "D-Glucosaminic acid": {}
      "1,2-Propanediol": {}
      "Tween 40": {}
      "a-Ketoglutaric acid": {}
      "a-Ketobutyric acid": {}
      "a-Methyl-D-Galactoside": {}
      "a-D-Lactose": {}
      Lactulose: {}
      Sucrose: {}
      Uridine: {}
      "L-Glutamine": {}
      "m-Tartaric acid": {}
      "D-Glucose-1-Phosphate": {}
      "D-Fructose-6-Phosphate": {}
      "Tween 80": {}
      "a-Hydroxyglutaric acid-g-Lactone": {}
      "a-Hydroxybutyric acid": {}
      "b-Methyl-D-Glucoside": {}
      Adonitol: {}
      Maltotriose: {}
      "2`-Deoxyadenosine": {}
      Adenosine: {}
      "Gly-Asp": {}
      "Citric acid": {}
      "m-Inositol": {}
      "D-Threonine": {}
      "Fumaric acid": {}
      "Bromosuccinic acid": {}
      "Propionic acid": {}
      "Mucic acid": {}
      "Glycolic acid": {}
      "Glyoxylic acid": {}
      "D-Cellobiose": {}
      Inosine: {}
      "Gly-Glu": {}
      "Tricarballylic acid": {}
      "L-Serine": {}
      "L-Threonine": {}
      "L-Alanine": {}
      "Ala-Gly": {}
      "Acetoacetic acid": {}
      "N-Acetyl-D-Mannosamine": {}
      Mono-Methylsuccinate: {}
      Methylpyruvate: {}
      "D-Malic acid": {}
      "L-Malic acid": {}
      "Gly-Pro": {}
      "p-Hydroxyphenyl Acetic acid": {}
      "m-Hydroxyphenyl Acetic acid": {}
      Tyramine: {}
      "D-Psicose": {}
      "L-Lyxose": {}
      Glucuronamide: {}
      "Pyruvic acid": {}
      "L-Galactonic acid-g-Lactone": {}
      "D-Galacturonic acid": {}
      Phenylethylamine: {}
      "2-Aminoethanol": {}

########################
# CLASSES
########################

classes:

  Paper:
    tree_root: true
    description: "A single paper or study."
    attributes:
      study_title:
        description: "The paper's title."
        annotations:
          prompt: >-
            Extract the paper's title. If not found, return only 'Not provided'.
          prompt.examples:
            - "Root Exudates Alter the Expression of Diverse Metabolic, Transport, Regulatory, and Stress Response Genes in Rhizosphere Pseudomonas."
        required: true

      authors:
        description: "Authors of the paper."
        annotations:
          prompt: |
            Extract a list of authors, semicolon delimited.
            If multiple authors appear in one string, split carefully.
            If not found, use 'Not provided'.
        range: string
        multivalued: true
        required: true

      doi:
        description: "DOI of the publication."
        annotations:
          prompt: "Extract the DOI. If not found, use 'Not provided'."
        range: string
        required: false

      date:
        description: "Publication date."
        annotations:
          prompt: "Extract the publication date. If not found, use 'Not provided'."
        range: string
        required: false

      traits:
        description: "Organismal traits measured or observed."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of traits
            focused on in the study.
          prompt.examples:
            - "Growth rate"
            - "Lactose production"
            - "motility"
        multivalued: true
        range: Trait
        required: false

      experiments:
        description: "Experiments (e.g., Biolog) included in the paper."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of experiments described in the paper.
            For each: motivation; design; environment; all organisms and their types;
            biological system; conditions; factors; Biolog subtype and plates;
            replicates; protocol steps; data types; measurement protocols; instruments;
            software; incubation temperature/duration.
            If none, use 'Not provided'. No newlines.
        range: Experiment
        multivalued: true
        required: true

  Experiment:
    description: "A single experiment from the paper."
    attributes:

      label:
        description: "A single-sentence description of this experiment."
        annotations:
          prompt: "A single sentence description of this experiment."

      experiment_motivation:
        description: "Rationale for the experiment."
        annotations:
          prompt: >-
            Explain the motivation or purpose of the experiment.
            If missing, use 'Not provided'.
        range: string
        required: false

      experiment_design:
        description: "Summary of how the experiment was designed."
        annotations:
          prompt: "Summarize the overall design. If missing, use 'Not provided'."
        range: string
        required: false

      environment:
        description: "Location or conditions in which the experiment occurred."
        annotations:
          prompt: "Extract the environment or setting."
        range: string
        required: false

      host_organism:
        description: "One or more hosts in the experiment."
        annotations:
          prompt: |
            Identify host organisms or systems in a semicolon-delimited list.
          prompt.examples:
            - "Brachypodium distachyon"
            - "Arabidopsis thaliana"
        range: Host
        multivaled: true
        required: false

      host_type:
        description: "Type of host (e.g., plant, animal)."
        annotations:
          prompt: >-
            Describe the host type if applicable (e.g., 'plant').
        range: string
        required: false

      target_organisms:
        description: "Organisms, including microbes, targeted in the experiment."
        annotations:
          prompt: |
            Extract a semicolon-delimited list of target organisms.
          prompt.examples:
            - "Pseudomonas fluorescens"
            - "Bacillus subtilis"
        range: Microbe
        multivalued: true
        required: false

      target_organism_group:
        description: "High-level description of organisms targeted in the study."
        annotations:
          prompt: >-
            Extract semicolon-delimited groups of target organisms.
        range: MicrobeGroup
        multivalued: true
        required: false

      biological_system:
        description: "Biological system under study."
        annotations:
          prompt: "Extract the focal biological system (e.g., rhizosphere)."
        range: string
        required: false

      conditions:
        description: "Experimental conditions (temperature, pH, etc.)."
        annotations:
          prompt: |
            Identify conditions in a semicolon-delimited list (e.g., 25Â°C; pH 7).
        multivalued: true
        range: string
        required: false

      traits:
        description: "Traits measured or observed."
        annotations:
          prompt: |
            Extract semicolon-delimited traits measured or observed.
          prompt.examples:
            - "Growth rate"
            - "motility"
        multivalued: true
        range: Trait
        required: false

      experimental_factors:
        description: "Factors tested or measured."
        annotations:
          prompt: "List experimental factors or treatments semicolon-delimited."
        range: ExperimentalFactor
        multivalued: true
        required: false

      is_biolog_experiment:
        description: "Whether the experiment is a Biolog experiment."
        annotations:
          prompt: >-
            Indicate if it's a Biolog experiment ('yes' or 'no').
            If not stated, 'not provided'.
        range: FlexibleBooleanEnum
        required: false

      type_of_biolog_experiment:
        description: "Type or subtype of the Biolog experiment."
        annotations:
          prompt: >-
            If Biolog, specify subtype (e.g., Phenotype MicroArray).
            Otherwise, 'Not provided'.
        range: string
        required: false

      plates:
        description: "Biolog plates used."
        annotations:
          prompt: |
            List any Biolog plates (e.g., PM01/PM1, PM02/PM2) used.
          prompt.examples:
            - "PM1"
            - "PM02"
        range: PlateEnum
        multivaled: true
        required: false

      replicates:
        description: "Number of replicates."
        annotations:
          prompt: >-
            Extract the number of replicates as a single number.
            If not mentioned, 'Not provided'.
        range: string
        required: false

      protocol_steps:
        description: "Key steps in the experimental protocol."
        annotations:
          prompt: |
            List full protocol steps semicolon-delimited (inoculation, incubation, recording, analysis).
          prompt.examples:
            - "Grow cells overnight on LB agar; Harvest and suspend in IF-0"
        range: ProtocolStep
        multivaled: true
        required: false

      plate_reader_types_of_data_collected:
        description: "Data types collected (OD, respiration, etc.)."
        annotations:
          prompt: >-
            Identify data types measured by the plate reader semicolon-delimited.
            If none, 'Not provided'.
        range: string
        multivalued: true
        required: false

      od_protocol:
        description: "Protocol for measuring optical density."
        annotations:
          prompt: >-
            Describe OD measurement protocol.
            If not described, 'Not provided'.
        range: string
        required: false

      respiration_protocol:
        description: "Protocol for measuring respiration/metabolic activity."
        annotations:
          prompt: >-
            Describe respiration/metabolic protocol (e.g., formazan production).
            If none, 'Not provided'.
        range: string
        required: false

      instrument_used:
        description: "Instruments or equipment used."
        annotations:
          prompt: |
            Extract instrument/equipment names semicolon-delimited.
          prompt.examples:
            - "OmniLog Phenotype MicroArray System"
        range: string
        multivalued: true
        required: false

      analysis_software:
        description: "Software used for analysis."
        annotations:
          prompt: |
            Extract analysis software semicolon-delimited.
          prompt.examples:
            - "OmniLog Parametric Analysis software v1.20.02"
        range: string
        multivalued: true
        required: false

      pm01_strain_results:
        description: >
          For PM01 assays in this experiment, group results by strain.
          Each entry stores `tested_strain`, `group`, and well-level results.
        annotations:
          prompt: |
            Extract PM01 (alias PM1) results grouped by strain.
            For each strain:
              - tested_strain
              - group (I, II, or III)
              - pm01_well_results: list of {chemical_name, result}.
            Omit if no PM01 data.
        range: BiologPM01StrainResult
        multivalued: true
        required: false

  BiologPM01StrainResult:
    description: "PM01 well-level results for a specific strain."
    attributes:
      tested_strain:
        description: "Microbe or strain name."
        range: Microbe
        required: true
        annotations:
          prompt.examples:
            - tested_strain: "Pf-5"
              group: "I"
              pm01_well_results:
                - chemical_name: fumaric acid
                  result: positive

      group:
        description: "Utilization cluster group (I, II, or III)."
        range: string
        annotations:
          prompt: |
            Which utilization cluster (Group I, II, or III) does this strain belong to?
        required: false

      pm01_well_results:
        description: "One or more well-level results."
        range: BiologPM01WellResult
        multivalued: true
        required: false

  BiologPM01WellResult:
    description: "A single well result from the PM01 plate."
    attributes:
      chemical_name:
        description: "Name of the chemical tested."
        range: string
        required: true

      amino_acid_abbreviation:
        description: >
          If the chemical is an amino acid, its three-letter IUPAC abbreviation.
        range: string
        required: false

      result:
        description: "Result: positive, negative, or not provided."
        range: PM01ResultEnum
        required: true

  Host:
    is_a: NamedEntity
    description: "Detail of a host organism or system."
    attributes:
      name:
        description: "Name of the host organism or system."
        annotations:
          prompt: "The name of the host organism or system."
        range: string
        required: false

  Microbe:
    is_a: NamedEntity
    description: "Information about a microbial species or strain."
    attributes:
      name:
        description: "Name of the microbial taxon or strain."
        annotations:
          prompt: "The name of the microbial species or strain."
        range: string
        required: false

  MicrobeGroup:
    is_a: NamedEntity
    description: "Information about a microbial group or taxon."
    attributes:
      name:
        description: "Name of a microbial group or taxon."
        annotations:
          prompt: "The name of the microbial group."
        range: string
        required: false

  ExperimentalFactor:
    is_a: NamedEntity
    description: "A factor manipulated or measured in an experiment."
    attributes:
      placeholder_attribute:
        description: "Placeholder for experimental factor."
        annotations:
          prompt: |
            Extract details about this experimental factor (e.g., concentration).
            If absent, 'Not provided'.
        range: string
        required: false

  Trait:
    is_a: NamedEntity
    description: "An organism's physical trait measured or observed."
    id_prefixes:
      - https
    annotations:
      prompt: |
        A physical trait of an organism measured or observed.
      annotators: bioportal:metpo

  ProtocolStep:
    description: "A step in an experimental protocol."
    attributes:
      step_description:
        description: "Description of a protocol step."
        annotations:
          prompt: "Description of a step in the experimental protocol."
        range: string
        required: false

      culture_media:
        description: "Culture media used in the step."
        annotations:
          prompt: |
            The culture media used in the step, if applicable.
        range: string
        required: false

      culture_temperature:
        description: "Culture incubation temperature."
        annotations:
          prompt: |
            The culture temperature used in the step, if applicable.
        range: string
        required: false

      culture_duration:
        description: "Culture incubation duration."
        annotations:
          prompt: |
            The culture duration used in the step, if applicable.
        range: string
        required: false
