id: https://example.org/PaperExtractionSchema
name: PaperExtractionSchema
title: Paper Extraction Schema
description: "Structured extraction for Biolog Phenotype MicroArray experiments."
license: https://creativecommons.org/publicdomain/zero/1.0/
version: 0.4.3

prefixes:
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  linkml: "https://w3id.org/linkml/"
  paperex: "https://example.org/PaperExtractionSchema/"

default_prefix: paperex
default_range: string

imports:
  - linkml:types
  - core

########################
# ENUMS
########################

enums:
  FlexibleBooleanEnum:
    description: "yes/no in lowercase; 'not provided' if ambiguous."
    permissible_values:
      "yes": {}
      "no": {}
      "true": {}
      "false": {}
      "not provided": {}

  PlateEnum:
    description: "Biolog Phenotype MicroArray plates."
    permissible_values:
      "PM01": {}
      "PM02": {}
      "PM1":  {}

  PMResultEnum:
    description: "Result for a single well."
    permissible_values:
      "positive": {}
      "negative": {}
      "undetermined": {}
      "not provided": {}

  GroupResultEnum:
    description: "Utilisation level for a compound cluster."
    permissible_values:
      "high": {}
      "variable": {}
      "none": {}
      "not provided": {}

########################
# CLASSES
########################

classes:

  Paper:
    tree_root: true
    description: "One publication that includes ≥ 1 Biolog assay."
    attributes:
      study_title:
        annotations:
          prompt: "extract the paper title; if absent, use 'not provided'."
        required: true

      authors:
        multivalued: true
        annotations:
          prompt: "extract authors as a semicolon-separated list; if none, 'not provided'."
        required: true

      doi:
        annotations:
          prompt: "extract the DOI or 'not provided'."

      date:
        annotations:
          prompt: "extract the publication date (e.g., '14 April 2021') or 'not provided'."

      biolog_experiments:
        multivalued: true
        range: BiologExperiment
        annotations:
          prompt: |
            if the paper describes any Biolog Phenotype MicroArray assays,
            create one BiologExperiment object per plate (PM01, PM02 …);
            otherwise omit this slot.

      experiments:
        description: "Experiments described in the paper."
        annotations:
          prompt: >-
            Extract a list of brief descriptions of experiments
            described in the paper. This list must be semicolon-delimited.
            For each description, include all of the following details if
            provided: experiment motivation (why it was performed),
            experiment design (how it was performed, including methods,
            tools, organisms, and chemicals used), environment (the location
            and conditions in which the experiment occurred, including
            metrics like temperature), all organisms used and their
            high-level type (e.g., plant, animal), the biological system
            under study (e.g., rhizosphere), experimental conditions
            (temperature, pH, etc.), and experimental factors tested or measured.
            Also note whether the experiment is a Biolog experiment and if so,
            the type or subtype of experiment (e.g., Phenotype MicroArray),
            the Biolog plates used (e.g., PM01), the number of replicates, all
            key steps in the experimental protocol, the types of data collected
            by the plate reader (e.g., OD, respiration), the protocol for
            measuring optical density (e.g., OD600 measured every 2 hours), 
            the protocol for measuring respiration (e.g., Colorimetric change
            at 590 nm for formazan detection), the instrument or equipment used
            (e.g., OmniLog Phenotype MicroArray System), the software used for
            data analysis (e.g., OmniLog Parametric Analysis software), the
            incubation temperature (e.g., 25°C), the total duration of incubation
            (e.g., 48 h), and any other relevant details.
            If nothing is mentioned regarding experiments, use 'Not provided'.
            Do not provide any details here not related to experiments.
            Do not include newlines.
        range: Experiment
        multivalued: true


  Experiment:
    description: "A single experiment."
    attributes:
      label:
        description: "One-sentence description of this experiment."
        annotations:
          prompt: >-
            Provide a one-sentence description of the experiment.

      pm01_strain_results:
        description: "PM01 results grouped by strain."
        annotations:
          prompt: |
            If Biolog PM01 results are described, provide a semicolon-delimited list of
            all strains tested. For each strain, include the following details:
            the strain name, the utilization cluster it belongs to (I, II, or III), and a complete list of all wells
            mentioned in the text. For each well, include the chemical name and the result (positive,
            negative, or not provided). Do not leave out any wells that the text says were catabolized
            (positive) or not (negative). If no PM01 results are mentioned, do not provide
            a value for this field.
        range: BiologPM01StrainResult
        multivalued: true


  BiologPM01StrainResult:
    description: "PM01 well-level results for a specific strain."
    attributes:
      tested_strain:
        range: Microbe
        required: false


  BiologExperiment:
    description: "Details for one Phenotype MicroArray plate."
    attributes:
      plate_name:
        range: PlateEnum
        annotations:
          prompt: "plate identifier (e.g., PM01, PM02); default to PM01 if unclear."
          examples: "PM01"

      summary_by_group:
        multivalued: true
        range: PMUtilisationGroup
        annotations:
          prompt: |
            optional coarse summary: for each utilisation group (I, II, III …)
            give its level (high/variable/none) and any compounds explicitly
            named in that paragraph. omit if not described.

      strain_results:
        multivalued: true
        range: StrainResult
        annotations:
          prompt: |
            for each microbial strain tested on this plate, create one
            StrainResult capturing organism, host, strain name, strain cluster
            (if stated), and every well-level result mentioned.


  StrainResult:
    description: "Results for one microbial strain on a plate."
    attributes:
      organism:
        annotations:
          prompt: "species name (e.g., 'Pseudomonas fluorescens') or 'not provided'."

      host:
        annotations:
          prompt: |
            host organism or environment (e.g., 'B. distachyon Bd21 root');
            if none, 'not provided'.

      strain_name:
        annotations:
          prompt: "exact strain identifier (e.g., 'Pf-5', 'Q8r1-96')."

      strain_group:
        annotations:
          prompt: |
            phylogenetic or utilisation cluster the strain belongs to
            (e.g., 'cluster I', 'P. fluorescens subgroup 3');
            if none, 'not provided'.

      well_results:
        multivalued: true
        range: WellResult
        annotations:
          prompt: |
            list every chemical explicitly stated as catabolised (positive),
            not catabolised (negative), or ambiguous (undetermined) for
            this strain.


  WellResult:
    description: "Outcome for one chemical well."
    attributes:
      chemical_name:
        annotations:
          prompt: "chemical exactly as written (e.g., 'citric acid')."

      result:
        range: PMResultEnum
        required: true
        annotations:
          prompt: |
            choose one: positive / negative / undetermined / not provided.
            map phrases like 'supported growth' → positive;
            'not catabolized' → negative.


  PMUtilisationGroup:
    description: "High-level cluster summary (optional)."
    attributes:
      group_label:
        annotations:
          prompt: "group label as in text (I, II, III …)."

      utilisation_level:
        range: GroupResultEnum
        annotations:
          prompt: "high / variable / none / not provided."

      compounds:
        multivalued: true
        annotations:
          prompt: |
            list every compound explicitly mentioned for this utilisation group;
            if none, leave the list empty.

  # A root minimal NamedEntity class
  NamedEntity:
    description: "Minimal base for all named entities in this schema."
    attributes:
      id:
        range: string

  # Microbe class to fix 'range: Microbe' references
  Microbe:
    is_a: NamedEntity
    description: "A microbial species or strain."
    attributes:
      name:
        description: "The name of the microbe."
        annotations:
          prompt: "Extract the microbe name (e.g., Pseudomonas fluorescens)."
        required: false

  # If your schema references a 'Host', define it too:
  Host:
    is_a: NamedEntity
    description: "A host organism or system."
    attributes:
      name:
        description: "Name of the host organism."
        annotations:
          prompt: "Extract the host name, e.g., Brachypodium distachyon."
        required: false
