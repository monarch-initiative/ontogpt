id: https://example.org/PaperExtractionSchema
name: PaperExtractionSchema
title: Paper Extraction Schema
description: "Structured extraction for Biolog Phenotype MicroArray experiments."
license: https://creativecommons.org/publicdomain/zero/1.0/
version: 0.4.2   # prompt scalar fix

prefixes:
  rdf: "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  linkml: "https://w3id.org/linkml/"
  paperex: "https://example.org/PaperExtractionSchema/"

default_prefix: paperex
default_range: string

imports:
  - linkml:types
  - core

########################
# ENUMS
########################

enums:
  FlexibleBooleanEnum:
    description: "yes/no in lowercase; 'not provided' if ambiguous."
    permissible_values:
      "yes": {}
      "no": {}
      "true": {}
      "false": {}
      "not provided": {}

  PlateEnum:
    description: "Biolog Phenotype MicroArray plates."
    permissible_values:
      "PM01": {}
      "PM02": {}
      "PM1":  {}

  PMResultEnum:
    description: "Result for a single well."
    permissible_values:
      "positive": {}
      "negative": {}
      "undetermined": {}
      "not provided": {}

  GroupResultEnum:
    description: "Utilisation level for a compound cluster."
    permissible_values:
      "high": {}
      "variable": {}
      "none": {}
      "not provided": {}

########################
# CLASSES
########################

classes:

  Paper:
    tree_root: true
    description: "One publication that includes ≥ 1 Biolog assay."
    attributes:
      study_title:
        annotations:
          prompt: "extract the paper title; if absent, use 'not provided'."
        required: true

      authors:
        multivalued: true
        annotations:
          prompt: "extract authors as a semicolon-separated list; if none, 'not provided'."
        required: true

      doi:
        annotations:
          prompt: "extract the DOI or 'not provided'."

      date:
        annotations:
          prompt: "extract the publication date (e.g., '14 April 2021') or 'not provided'."

      biolog_experiments:
        multivalued: true
        range: BiologExperiment
        annotations:
          prompt: |
            if the paper describes any Biolog Phenotype MicroArray assays,
            create one BiologExperiment object per plate (PM01, PM02 …);
            otherwise omit this slot.
        required: false

  BiologExperiment:
    description: "Details for one Phenotype MicroArray plate."
    attributes:
      plate_name:
        range: PlateEnum
        annotations:
          prompt: "plate identifier (e.g., PM01, PM02); default to PM01 if unclear."
          examples: "PM01"

      summary_by_group:
        multivalued: true
        range: PMUtilisationGroup
        annotations:
          prompt: |
            optional coarse summary: for each utilisation group (I, II, III …)
            give its level (high/variable/none) and any compounds explicitly
            named in that paragraph. omit if not described.

      strain_results:
        multivalued: true
        range: StrainResult
        annotations:
          prompt: |
            for each microbial strain tested on this plate, create one
            StrainResult capturing organism, host, strain name, strain cluster
            (if stated), and every well-level result mentioned.

  StrainResult:
    description: "Results for one microbial strain on a plate."
    attributes:
      organism:
        annotations:
          prompt: "species name (e.g., 'Pseudomonas fluorescens') or 'not provided'."

      host:
        annotations:
          prompt: |
            host organism or environment (e.g., 'B. distachyon Bd21 root');
            if none, 'not provided'.

      strain_name:
        annotations:
          prompt: "exact strain identifier (e.g., 'Pf-5', 'Q8r1-96')."

      strain_group:
        annotations:
          prompt: |
            phylogenetic or utilisation cluster the strain belongs to
            (e.g., 'cluster I', 'P. fluorescens subgroup 3');
            if none, 'not provided'.

      well_results:
        multivalued: true
        range: WellResult
        annotations:
          prompt: |
            list every chemical explicitly stated as catabolised (positive),
            not catabolised (negative), or ambiguous (undetermined) for
            this strain.

  WellResult:
    description: "Outcome for one chemical well."
    attributes:
      chemical_name:
        annotations:
          prompt: "chemical exactly as written (e.g., 'citric acid')."

      result:
        range: PMResultEnum
        required: true
        annotations:
          prompt: |
            choose one: positive / negative / undetermined / not provided.
            map phrases like 'supported growth' → positive;
            'not catabolized' → negative.

  PMUtilisationGroup:
    description: "High-level cluster summary (optional)."
    attributes:
      group_label:
        annotations:
          prompt: "group label as in text (I, II, III …)."

      utilisation_level:
        range: GroupResultEnum
        annotations:
          prompt: "high / variable / none / not provided."

      compounds:
        multivalued: true
        annotations:
          prompt: |
            list every compound explicitly mentioned for this utilisation group;
            if none, leave the list empty.

  NamedEntity:
    attributes:
      id:
        range: string
